# 局域网文件上传器

一个简单、自托管的 Node.js 服务器，用于在局域网 (LAN) 内快速上传和分享文件。

此版本采用了去中心化的用户隔离方案。系统无需数据库，而是通过算法将您的身份凭据映射到私有的存储空间。

[English](README.md)

## 功能特性

* **凭据登录**: 使用用户名和密码组合登录。无需注册流程——相同的账号密码将始终指向您之前的私有空间。
* **确定性隔离**: 服务器通过对用户名和密码进行 SHA-256 哈希计算，生成一个唯一且稳定的 UUID。这确保了在没有数据库的情况下，文件依然能按用户完全隔离。
* **隔离存储**: 文件根据生成的 UUID 存储在服务器的独立目录中：`uploads/<用户-UUID>/`。
* **简洁 Web 界面**: 支持直接从浏览器批量上传文件或整个文件夹。
* **安全注销**: 注销操作会结束会话，并*永久删除*服务器上属于该用户的所有文件。
* **自动解决冲突**: 如果上传同名文件，系统会自动添加时间戳进行重命名。
* **多语言支持**: 自动检测浏览器语言，支持英文 (`en`) 和简体中文 (`zh`)。
* **日志记录**: 使用 winston 记录用户活动（登录、上传、下载、注销），日志存储在 `/logs` 目录并自动轮替。

## 环境要求

* [Node.js](https://nodejs.org/) (v14.14.0 或更高版本)
* [npm](https://www.npmjs.com/)

## 安装

1.  克隆或下载源代码。
2.  在项目根目录打开终端。
3.  安装依赖：
    ```bash
    npm install
    ```

## 如何运行

1.  在终端运行：
    ```bash
    npm start
    ```
2.  服务器启动后会打印访问地址：
    ```
    🚀 服务器已启动！ (正在监听端口 3000)
    请在浏览器中访问以下地址:
        - 本机: http://localhost:3000
        - 局域网: [http://192.168.](http://192.168.)x.x:3000
    ```
3.  在浏览器中打开地址。
4.  输入**用户名**（3-20位字符）和**密码**（最少6位）即可登录。

## 工作原理

* **认证逻辑**: 服务器将用户名和密码组合后进行 SHA-256 哈希，并将其格式化为标准的 UUID v4 格式。该 UUID 用于唯一标识用户的会话和文件夹。
* **文件服务**: `/files` 路由受到中间件保护，仅允许登录用户访问其对应 UUID 目录下的文件。
* **存储管理**: 文件保存至 `uploads/<UUID>`。当用户点击注销时，服务器会异步递归删除该特定目录，以确保隐私安全。